<script setup>
import nuiEvents from './utils/nui-events'
import { onMounted, watch } from 'vue';
import { fetchNui } from '@/utils'
import { useMenuData } from '@/stores/data'
const menuData = useMenuData()
import MainPage from './components/MainPage.vue'
import World from './components/World.vue'
import Others from './components/Others.vue'
import { storeToRefs } from 'pinia'
const {checkBoxData} = storeToRefs(menuData)
import Settings from './components/Settings.vue'
onMounted(() => {
  nuiEvents();
});

watch(checkBoxData, (newValue, oldValue) => {
  fetchNui('updateCheckBoxData', newValue);
}, { deep: true });
</script>

<template>
  <TransitionGroup>
    <div v-if="menuData.open" class="w-screen min-h-screen place-items-center flex justify-center z-[99]" id="bgaa">
          <div class="flex flex-col gap-[0.26vw] ">
                <div  class="w-[43.177vw] h-[4.063vw] bg-[#25262B]/85  rounded-[0.5vw] flex items-center content-center justify-between p-[0.313vw]">
                    <div class="flex gap-[0.313vw] ml-[0.208vw] items-start">
                      <img class="w-[2.969vw] h-[2.969vw] rounded-[5.208vw]" :src="menuData.profilePhoto" alt="">
                      <div class="flex flex-col justify-center content-center mt-[0.333vw] items-center">
                          <span class="w-[20.267vw] text-white/50 text-[1.042vw] font-['Regular'] font-normal">{{ menuData.Locales.Welcome }},</span>
                          <span class="w-[20.267vw] text-white mt-[-0.521vw] text-[0.833vw] font-['Medium'] font-normal">{{ menuData.playerName }}</span>
                      </div>
                    </div>
                    <div class="flex flex-col gap-[0.573vw] items-end">
                      <div @click='menuData.toggleMenu(false)' class="w-[0.838vw] h-[0.885vw] bg-rose-400 rounded-[5.781vw] cursor-pointer ease-in-out duration-300 hover:bg-rose-300"></div>
                      <div class="w-[4.844vw] h-[1.719vw] bg-[#B6B2A9]/45 rounded-[0.26vw] flex items-center content-center justify-center">
                          <span class="text-white font-['Medium'] font-normal text-[0.833vw]">{{ menuData.fps }} FPS</span>
                      </div>
                    </div>
                </div>
                <div class="w-[43.177vw] h-[20.99vw]  bg-[#25262B]/85 rounded-[0.5vw]  gap-[0.365vw] flex flex-col items-center content-center justify-center">
                  <div class="w-[42.448vw] h-[2.552vw] bg-white/10 rounded-[0.26vw] flex items-center content-center justify-between p-[0.469vw]">
                      <div class="flex gap-[0.417vw] items-center content-center justify-center">
                          <div @click="menuData.changePage('main')" class="w-[4.375vw] h-[1.719vw] bg-[#B6B2A9]/45 rounded-[0.208vw] flex content-center items-center justify-center gap-[0.313vw] duration-300 ease-in-out hover:bg-[#B6B2A9]/70 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1.25vw" height="1.25vw" viewBox="0 0 24 24" fill="none">
                              <path d="M4 19V10C4 9.68333 4.071 9.38333 4.213 9.1C4.355 8.81667 4.55067 8.58333 4.8 8.4L10.8 3.9C11.15 3.63333 11.55 3.5 12 3.5C12.45 3.5 12.85 3.63333 13.2 3.9L19.2 8.4C19.45 8.58333 19.646 8.81667 19.788 9.1C19.93 9.38333 20.0007 9.68333 20 10V19C20 19.55 19.804 20.021 19.412 20.413C19.02 20.805 18.5493 21.0007 18 21H15C14.7167 21 14.4793 20.904 14.288 20.712C14.0967 20.52 14.0007 20.2827 14 20V15C14 14.7167 13.904 14.4793 13.712 14.288C13.52 14.0967 13.2827 14.0007 13 14H11C10.7167 14 10.4793 14.096 10.288 14.288C10.0967 14.48 10.0007 14.7173 10 15V20C10 20.2833 9.904 20.521 9.712 20.713C9.52 20.905 9.28267 21.0007 9 21H6C5.45 21 4.97933 20.8043 4.588 20.413C4.19667 20.0217 4.00067 19.5507 4 19Z" fill="#F0F0F0"/>
                            </svg>
                            <span class="text-[0.833vw]  text-white font-['Regular']">{{ menuData.Locales.Main }}  </span>
                          </div>
                          <div @click="menuData.changePage('world')" class="w-[4.375vw] h-[1.719vw] bg-[#B6B2A9]/45 rounded-[0.208vw] flex content-center items-center justify-center gap-[0.313vw] duration-300 ease-in-out hover:bg-[#B6B2A9]/70 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1.198vw" height="1.198vw" viewBox="0 0 23 23" fill="none">
                              <path d="M17.1545 16.6654C16.9053 15.8987 16.1866 15.3333 15.3337 15.3333H14.3753V12.4583C14.3753 12.2041 14.2744 11.9604 14.0946 11.7806C13.9149 11.6009 13.6712 11.5 13.417 11.5H7.66699V9.58329H9.58366C9.83782 9.58329 10.0816 9.48233 10.2613 9.3026C10.441 9.12288 10.542 8.87913 10.542 8.62496V6.70829H12.4587C12.967 6.70829 13.4545 6.50636 13.8139 6.14691C14.1734 5.78747 14.3753 5.29996 14.3753 4.79163V4.39871C15.5219 4.86098 16.5395 5.59421 17.3408 6.53563C18.1422 7.47706 18.7034 8.59865 18.9766 9.80439C19.2498 11.0101 19.2267 12.2641 18.9094 13.459C18.5921 14.6539 17.9899 15.7541 17.1545 16.6654ZM10.542 19.0995C6.75658 18.63 3.83366 15.41 3.83366 11.5C3.83366 10.9058 3.91033 10.3308 4.03491 9.78454L8.62533 14.375V15.3333C8.62533 15.8416 8.82726 16.3291 9.1867 16.6886C9.54615 17.048 10.0337 17.25 10.542 17.25M11.5003 1.91663C10.2418 1.91663 8.99565 2.16451 7.83294 2.64611C6.67024 3.12772 5.61378 3.83362 4.72389 4.72352C2.92666 6.52074 1.91699 8.9583 1.91699 11.5C1.91699 14.0416 2.92666 16.4792 4.72389 18.2764C5.61378 19.1663 6.67024 19.8722 7.83294 20.3538C8.99565 20.8354 10.2418 21.0833 11.5003 21.0833C14.042 21.0833 16.4795 20.0736 18.2768 18.2764C20.074 16.4792 21.0837 14.0416 21.0837 11.5C21.0837 10.2415 20.8358 8.99528 20.3542 7.83258C19.8726 6.66987 19.1667 5.61341 18.2768 4.72352C17.3869 3.83362 16.3304 3.12772 15.1677 2.64611C14.005 2.16451 12.7588 1.91663 11.5003 1.91663Z" fill="#F0F0F0"/>
                            </svg>
                            <span class="text-[0.833vw] text-white font-['Regular']">{{ menuData.Locales.World }}</span>
                          </div>
                          <div @click="menuData.changePage('others')" class="w-[4.375vw] h-[1.719vw] bg-[#B6B2A9]/45 rounded-[0.208vw] flex content-center items-center justify-center gap-[0.313vw] duration-300 ease-in-out hover:bg-[#B6B2A9]/70 cursor-pointer">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1.094vw" height="1.094vw" viewBox="0 0 21 21" fill="none">
                              <path d="M10.5 8.84624C11.4012 8.84624 12.1362 9.58124 12.1362 10.5C12.1362 11.375 11.4012 12.1187 10.5 12.1187C9.59875 12.1187 8.86375 11.375 8.86375 10.5C8.86375 9.58124 9.59875 8.84624 10.5 8.84624ZM6.44875 17.5C7 17.8325 8.2075 17.325 9.59875 16.0125C9.14375 15.4962 8.6975 14.9362 8.2775 14.35C7.57244 14.282 6.87147 14.1769 6.1775 14.035C5.73125 15.9075 5.8975 17.1937 6.44875 17.5ZM7.07 12.4775L6.81625 12.0312C6.72 12.285 6.62375 12.5387 6.5625 12.7837C6.79875 12.8362 7.06125 12.88 7.3325 12.9237L7.07 12.4775ZM12.7925 11.8125L13.5013 10.5L12.7925 9.18749C12.53 8.72374 12.25 8.31249 11.9963 7.90124C11.5238 7.87499 11.025 7.87499 10.5 7.87499C9.975 7.87499 9.47625 7.87499 9.00375 7.90124C8.75 8.31249 8.47 8.72374 8.2075 9.18749L7.49875 10.5L8.2075 11.8125C8.47 12.2762 8.75 12.6875 9.00375 13.0987C9.47625 13.125 9.975 13.125 10.5 13.125C11.025 13.125 11.5238 13.125 11.9963 13.0987C12.25 12.6875 12.53 12.2762 12.7925 11.8125ZM10.5 5.93249C10.3337 6.12499 10.1587 6.32624 9.98375 6.56249H11.0163C10.8413 6.32624 10.6663 6.12499 10.5 5.93249ZM10.5 15.0675C10.6663 14.875 10.8413 14.6737 11.0163 14.4375H9.98375C10.1587 14.6737 10.3337 14.875 10.5 15.0675ZM14.5425 3.49999C14 3.16749 12.7925 3.67499 11.4012 4.98749C11.8562 5.50374 12.3025 6.06374 12.7225 6.64999C13.44 6.71999 14.1488 6.82499 14.8225 6.96499C15.2688 5.09249 15.1025 3.80624 14.5425 3.49999ZM13.93 8.52249L14.1837 8.96874C14.28 8.71499 14.3763 8.46124 14.4375 8.21624C14.2013 8.16374 13.9388 8.11999 13.6675 8.07624L13.93 8.52249ZM15.1988 2.35374C16.485 3.08874 16.625 5.02249 16.0825 7.27999C18.305 7.93624 19.9062 9.02124 19.9062 10.5C19.9062 11.9787 18.305 13.0637 16.0825 13.72C16.625 15.9775 16.485 17.9112 15.1988 18.6462C13.9213 19.3812 12.18 18.5412 10.5 16.94C8.82 18.5412 7.07875 19.3812 5.7925 18.6462C4.515 17.9112 4.375 15.9775 4.9175 13.72C2.695 13.0637 1.09375 11.9787 1.09375 10.5C1.09375 9.02124 2.695 7.93624 4.9175 7.27999C4.375 5.02249 4.515 3.08874 5.7925 2.35374C7.07875 1.61874 8.82 2.45874 10.5 4.05999C12.18 2.45874 13.9213 1.61874 15.1988 2.35374ZM14.945 10.5C15.2425 11.1562 15.505 11.8125 15.7237 12.4775C17.5612 11.9262 18.5938 11.1387 18.5938 10.5C18.5938 9.86124 17.5612 9.07374 15.7237 8.52249C15.505 9.18749 15.2425 9.84374 14.945 10.5ZM6.055 10.5C5.7575 9.84374 5.495 9.18749 5.27625 8.52249C3.43875 9.07374 2.40625 9.86124 2.40625 10.5C2.40625 11.1387 3.43875 11.9262 5.27625 12.4775C5.495 11.8125 5.7575 11.1562 6.055 10.5ZM13.93 12.4775L13.6675 12.9237C13.9388 12.88 14.2013 12.8362 14.4375 12.7837C14.3763 12.5387 14.28 12.285 14.1837 12.0312L13.93 12.4775ZM11.4012 16.0125C12.7925 17.325 14 17.8325 14.5425 17.5C15.1025 17.1937 15.2688 15.9075 14.8225 14.035C14.1488 14.175 13.44 14.28 12.7225 14.35C12.3025 14.9362 11.8562 15.4962 11.4012 16.0125ZM7.07 8.52249L7.3325 8.07624C7.06125 8.11999 6.79875 8.16374 6.5625 8.21624C6.62375 8.46124 6.72 8.71499 6.81625 8.96874L7.07 8.52249ZM9.59875 4.98749C8.2075 3.67499 7 3.16749 6.44875 3.49999C5.8975 3.80624 5.73125 5.09249 6.1775 6.96499C6.87147 6.8231 7.57244 6.71796 8.2775 6.64999C8.6975 6.06374 9.14375 5.50374 9.59875 4.98749Z" fill="#F0F0F0"/>
                            </svg>
                            <span class="text-[0.833vw] text-white font-['Regular']">{{ menuData.Locales.Other }}</span>
                          </div>
                      </div>
                      <div @click="menuData.changePage('settings')" class="w-[5.26vw] h-[1.719vw] bg-[#B6B2A9]/45 rounded-[0.208vw] flex content-center items-center justify-center gap-[0.313vw] duration-300 ease-in-out hover:bg-[#B6B2A9]/70 cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" width="1.25vw" height="1.25vw" viewBox="0 0 24 24" fill="none">
                          <path d="M10.8255 22C10.3755 22 9.98814 21.85 9.66347 21.55C9.3388 21.25 9.1428 20.8833 9.07547 20.45L8.85047 18.8C8.6338 18.7167 8.4298 18.6167 8.23847 18.5C8.04714 18.3833 7.85947 18.2583 7.67547 18.125L6.12547 18.775C5.7088 18.9583 5.29214 18.975 4.87547 18.825C4.4588 18.675 4.1338 18.4083 3.90047 18.025L2.72547 15.975C2.49214 15.5917 2.42547 15.1833 2.52547 14.75C2.62547 14.3167 2.85047 13.9583 3.20047 13.675L4.52547 12.675C4.5088 12.5583 4.50047 12.4457 4.50047 12.337V11.662C4.50047 11.554 4.5088 11.4417 4.52547 11.325L3.20047 10.325C2.85047 10.0417 2.62547 9.68333 2.52547 9.25C2.42547 8.81667 2.49214 8.40833 2.72547 8.025L3.90047 5.975C4.1338 5.59167 4.4588 5.325 4.87547 5.175C5.29214 5.025 5.7088 5.04167 6.12547 5.225L7.67547 5.875C7.8588 5.74167 8.05047 5.61667 8.25047 5.5C8.45047 5.38333 8.65047 5.28333 8.85047 5.2L9.07547 3.55C9.14214 3.11667 9.33814 2.75 9.66347 2.45C9.9888 2.15 10.3761 2 10.8255 2H13.1755C13.6255 2 14.0131 2.15 14.3385 2.45C14.6638 2.75 14.8595 3.11667 14.9255 3.55L15.1505 5.2C15.3671 5.28333 15.5715 5.38333 15.7635 5.5C15.9555 5.61667 16.1428 5.74167 16.3255 5.875L17.8755 5.225C18.2921 5.04167 18.7088 5.025 19.1255 5.175C19.5421 5.325 19.8671 5.59167 20.1005 5.975L21.2755 8.025C21.5088 8.40833 21.5755 8.81667 21.4755 9.25C21.3755 9.68333 21.1505 10.0417 20.8005 10.325L19.4755 11.325C19.4921 11.4417 19.5005 11.5543 19.5005 11.663V12.337C19.5005 12.4457 19.4838 12.5583 19.4505 12.675L20.7755 13.675C21.1255 13.9583 21.3505 14.3167 21.4505 14.75C21.5505 15.1833 21.4838 15.5917 21.2505 15.975L20.0505 18.025C19.8171 18.4083 19.4921 18.675 19.0755 18.825C18.6588 18.975 18.2421 18.9583 17.8255 18.775L16.3255 18.125C16.1421 18.2583 15.9505 18.3833 15.7505 18.5C15.5505 18.6167 15.3505 18.7167 15.1505 18.8L14.9255 20.45C14.8588 20.8833 14.6631 21.25 14.3385 21.55C14.0138 21.85 13.6261 22 13.1755 22H10.8255ZM12.0505 15.5C13.0171 15.5 13.8421 15.1583 14.5255 14.475C15.2088 13.7917 15.5505 12.9667 15.5505 12C15.5505 11.0333 15.2088 10.2083 14.5255 9.525C13.8421 8.84167 13.0171 8.5 12.0505 8.5C11.0671 8.5 10.2378 8.84167 9.56247 9.525C8.88714 10.2083 8.5498 11.0333 8.55047 12C8.55114 12.9667 8.8888 13.7917 9.56347 14.475C10.2381 15.1583 11.0671 15.5 12.0505 15.5Z" fill="#F0F0F0"/>
                        </svg>
                        <span class="text-[0.833vw] text-white font-['Regular']">{{ menuData.Locales.Settings }}</span>
                      </div>
                  </div>
                  <div class="w-[42.448vw] h-[17.24vw] bg-white/10 rounded-[0.26vw] ">
                      <TransitionGroup>
                        <div v-if="menuData.currentPage === 'main'" class="flex flex-col gap-[0.26vw]  justify-start items-center pt-[0.469vw]">
                          <MainPage ></MainPage>
                        </div>
                        <div v-if="menuData.currentPage === 'world'" class="flex flex-col gap-[0.26vw]  justify-start items-center pt-[0.469vw]">
                          <World></World>
                        </div>
                        <div v-if="menuData.currentPage === 'others'" class="flex flex-col gap-[0.26vw]  justify-start items-center pt-[0.469vw]">
                          <Others></Others>
                        </div>
                        <div v-if="menuData.currentPage === 'settings'" class="flex flex-col gap-[0.26vw] justify-start pt-[0.469vw] pl-[0.365vw]">
                          <Settings></Settings>
                        </div>
                      </TransitionGroup>
                  </div>
              </div>
          </div>
    </div>
  </TransitionGroup>

</template>

<style scoped>
    .v-enter-active,
    .v-leave-active {
      transition: opacity 0.5s ease;
    }

    .v-enter-from,
    .v-leave-to {
      opacity: 0;
    }

    .bgx{
      background: linear-gradient(180deg, #171A27 0%, #383745 100%);
    }

    .bgl{
      background: linear-gradient(180deg, #171A27 0%, #383745 100%);
    }
</style>
